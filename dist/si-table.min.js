/*! si-table 0.0.1-alpha.2 10-04-2014 */
!function(){angular.module("siTable.config",[]).value("siTable.config",{debug:!0}),angular.module("siTable.directives",[]),angular.module("siTable.filters",[]),angular.module("siTable",["siTable.config","siTable.directives","siTable.filters"]),angular.module("siTable.directives").directive("siTable",function(a){return{restrict:"A",scope:{},transclude:!0,replace:!0,template:"<table ng-transclude></table>",controller:function(b,c,d){b.paginationParams={offset:0,maxShowPages:10,limit:1/0},this.paginationParams=b.paginationParams,d.$observe("pagination",function(a){angular.isUndefined(a)||(b.paginationParams.limit=a?parseInt(a,10):10)}),d.$observe("paginationLength",function(a){a&&(b.paginationParams.maxShowPages=a)}),b.$watch("paginationParams.total",function(){b.paginationParams.offset=0}),b.$watch("sortingParams",function(a){var c=[];for(var d in a)c.push("desc"===a[d]?"-"+d:d);b.sortArray=c,b.paginationParams.offset=0},!0),angular.isDefined(d.pagination)&&c.after(a('<si-table-pagination params="paginationParams"/>')(b))}}}),angular.module("siTable.directives").directive("siTablePagination",function(){return{restrict:"E",scope:{params:"="},template:'            <ul class="pagination">                <li ng-class="{disabled: params.offset === 0}">                    <a href ng-click="first()">First</a>                </li>                <li ng-class="{disabled: params.offset === 0}">                    <a href ng-click="previous()">Previous</a>                </li>                <li ng-repeat="page in showPages"                        ng-class="{active: currPage === page}">                    <a href ng-click="setPage(page)">{{ page }}</a>                </li>                <li ng-class="{disabled:                            params.offset + params.limit >= params.total}">                    <a href ng-click="next()">Next</a>                </li>                <li ng-class="{disabled:                        params.offset + params.limit >= params.total}">                    <a href ng-click="last()">Last</a>                </li>            </ul>',link:function(a){a.next=function(){a.params.offset+a.params.limit<a.params.total&&(a.params.offset+=a.params.limit)},a.previous=function(){a.params.offset>0&&(a.params.offset-=a.params.limit)},a.setPage=function(b){a.params.offset=(b-1)*a.params.limit},a.first=function(){a.params.offset=0},a.last=function(){a.setPage(a.maxPage)},a.$watch("params",function(b){for(var c=Math.floor(b.offset/b.limit),d=Math.ceil(b.total/b.limit)-1,e=Math.max(0,Math.min(c-Math.ceil(b.maxShowPages/2),d-b.maxShowPages+1)),f=[],g=e,h=0;d>=g&&h<b.maxShowPages;h++)f.push(g+1),g++;a.maxPage=d+1,a.currPage=c+1,a.showPages=f},!0)}}}),angular.module("siTable.directives").directive("sortBy",function(){return{restrict:"A",transclude:!0,replace:!0,scope:!0,template:'            <th class="sort" ng-click="sort()" ng-class="{                    \'sort-asc\': sortingParams[sortBy] === \'asc\',                    \'sort-desc\': sortingParams[sortBy] === \'desc\'                }">                <a href ng-transclude></a>                <span class="sort-caret sort-asc"                        ng-if="sortingParams[sortBy] === \'asc\'">&#9660;</span>                <span class="sort-caret sort-desc"                        ng-if="sortingParams[sortBy] === \'desc\'">&#9650;</span>            </th>',link:function(a,b,c){c.$observe("sortBy",function(b){a.sortBy=b}),a.sort=function(){var b=c.sortBy;b&&a.sortingParams&&(a.sortingParams[b]?"asc"===a.sortingParams[b]?a.sortingParams[b]="desc":delete a.sortingParams[b]:a.sortingParams[b]="asc")}}}}),angular.module("siTable.directives").directive("tr",function(){return{restrict:"E",priority:1001,require:"^siTable",scope:!0,compile:function(a,b){return b.ngRepeat?(b.ngRepeat+=" | orderBy:sortArray",b.ngRepeat+=" | siPagination:paginationParams",function(a,b,c,d){a.paginationParams=d.paginationParams}):void 0}}}),angular.module("siTable.filters").filter("siPagination",function(){return function(a,b){return b?(b.total=a?a.length:0,a?a.slice(b.offset,b.offset+b.limit):[]):a}})}(window,document);