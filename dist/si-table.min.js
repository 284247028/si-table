/*! si-table 0.0.1-alpha.2 11-04-2014 */
!function(){angular.module("siTable.config",[]).value("siTable.config",{debug:!0}),angular.module("siTable.directives",[]),angular.module("siTable.filters",[]),angular.module("siTable",["siTable.config","siTable.directives","siTable.filters"]),angular.module("siTable.directives").directive("siTable",function(){return{restrict:"A",scope:{sorting:"="},controller:function(a){var b=this;this.paginationParams={offset:0,limit:1/0},this.sortingParams={sortArray:[]},a.$watch(function(){return b.sortingParams.sortArray},function(b){if(a.sorting.splice(0,a.sorting.length),angular.isArray(a.sorting))for(var c=0;c<b.length;c++)a.sorting.push(b[c])},!0)}}}),angular.module("siTable.directives").directive("siTablePagination",function(){return{restrict:"E",priority:1001,require:"^siTable",scope:{offset:"=",total:"=",limit:"="},template:'            <ul class="pagination">                <li ng-class="{disabled: params.offset === 0}">                    <a href ng-click="setPage(1)">First</a>                </li>                <li ng-class="{disabled: params.offset === 0}">                    <a href ng-click="setPage(currPage - 1)">Previous</a>                </li>                <li ng-repeat="page in showPages"                        ng-class="{active: currPage === page}">                    <a href ng-click="setPage(page)">{{ page }}</a>                </li>                <li ng-class="{disabled:                        params.offset + params.limit >= params.total}">                    <a href ng-click="setPage(currPage + 1)">Next</a>                </li>                <li ng-class="{disabled:                        params.offset + params.limit >= params.total}">                    <a href ng-click="setPage(maxPage)">Last</a>                </li>            </ul>',link:function(a,b,c,d){var e=10;a.params=d.paginationParams,c.$observe("indices",function(a){isNaN(parseInt(a,10))||(e=parseInt(a,10))}),a.setPage=function(b){b>=1&&b<=a.maxPage&&(a.params.offset=(b-1)*a.params.limit)},a.$watch("params",function(b){for(var c=Math.floor(b.offset/b.limit),d=Math.ceil(b.total/b.limit)-1,f=Math.max(0,Math.min(c-Math.ceil(e/2),d-e+1)),g=[],h=f,i=0;d>=h&&e>i;i++)g.push(h+1),h++;a.maxPage=d+1,a.currPage=c+1,a.showPages=g,a.offset=b.offset,a.total=b.total},!0),a.$watch("offset",function(b){a.params.offset=b}),a.$watch("total",function(b){a.params.total=b}),a.$watch("limit",function(b){a.params.limit=b})}}}),angular.module("siTable.directives").directive("sortBy",function(){return{restrict:"A",transclude:!0,replace:!0,scope:!0,require:"^siTable",template:'            <th class="sort" ng-click="sort()" ng-class="{                    \'sort-asc\': state === \'asc\',                    \'sort-desc\': state === \'desc\'                }">                <a href ng-transclude></a>                <span class="sort-caret sort-asc"                        ng-if="state === \'asc\'">&#9660;</span>                <span class="sort-caret sort-desc"                        ng-if="state === \'desc\'">&#9650;</span>            </th>',link:function(a,b,c,d){var e=d.sortingParams;c.$observe("sortBy",function(b){a.sortBy=b}),a.sort=function(){var b=c.sortBy;b&&e&&(-1!==e.sortArray.indexOf(b)?(e.sortArray[e.sortArray.indexOf(b)]="-"+b,a.state="desc"):-1!==e.sortArray.indexOf("-"+b)?(e.sortArray.splice(e.sortArray.indexOf("-"+b),1),a.state=""):(e.sortArray.push(b),a.state="asc"))}}}}),angular.module("siTable.directives").directive("tr",function(){return{restrict:"E",priority:1001,require:"^siTable",scope:!0,compile:function(a,b){return b.ngRepeat?(b.ngRepeat+=" | orderBy:sortingParams.sortArray",b.ngRepeat+=" | siPagination:paginationParams",function(a,b,c,d){a.paginationParams=d.paginationParams,a.sortingParams=d.sortingParams}):void 0}}}),angular.module("siTable.filters").filter("siPagination",function(){return function(a,b){return b?(b.total=a?a.length:0,a?a.slice(b.offset,b.offset+b.limit):[]):a}})}(window,document);